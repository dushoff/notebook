Introduction
------------

A randomization test for 2x2 tables, designed to address the difficulty
I found getting CIs for a risk ratio with a small sample size (see
[Ebola risk](Ebola_risk "wikilink"))

The question {#the_question}
------------

We want to evaluate the uncertainty of some measurement based on a 2x2
table from a population sample. For example, we have some people with a
disease who either have or have not received an experimental treatment,
and we want to know the relative risk of a bad outcome for treated vs.
untreated people.

There are plenty of good asymptotic tests for large sample size, but
there doesn\'t seem to be any consensus on what to do for smaller
samples. In particular, the two R tests that I found easily (from the
packages epicalc and epitools) gave very different answers, neither of
which seemed right in the limit where one population (e.g., the
untreated population) gets large.

The idea {#the_idea}
--------

Typically, we think of data sets like this as being generated by a
Bernoulli process. Each category of people has a certain (possibly
unknown) probability of having the outcome of interest (say, disease).
Each person then has an outcome determined at random with that
probability \-- equivalent to choosing a uniform random number for the
person, and comparing it with the probability for that category: if the
random number is less than the probability, than the person gets the
disease.

The idea here is to choose the random number for each person, and
compare it with the relevant probability, in *two steps*. We *first*
choose a random number for each person, and *then* figure out what
parameters (category probabilities) are consistent with the observed
data, given these random choices. We can calculate the possible range of
any parameter of interest (category probabilities, odds ratios, risk
ratios) for *this particular randomization*. We repeat this process a
few thousand times and generate a confidence interval for our parameter
of interest.

Justification
-------------

CIs generated this way meet formal frequentist criteria: if the
parameter is outside the quantile range representing a certain
confidence (e.g., 95%), this means that
